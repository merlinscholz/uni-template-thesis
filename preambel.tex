% In dieser Datei ist es eigentlich nicht nötig etwas überhalb der Markierung zu verändern
% Teilweise aus classicthesis (https://bitbucket.org/amiede/classicthesis/src/master/classicthesis.sty) übernommen
% Grundlegende Packages
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{textcomp}
\usepackage[ngerman,german,english]{babel}

% PDF Options
%\pdfcompresslevel=9
%\pdfadjustspacing=1 

% Farben
\usepackage[dvipsnames]{xcolor}
\definecolor{TUGreen}{rgb}{0.517,0.721,0.094}
\definecolor{BrightGray}{gray}{0.9}
\definecolor{DarkGray}{gray}{0.2}
\definecolor{white}{rgb}{1,1,1}
\definecolor{black}{rgb}{0,0,0}
\definecolor{red}{rgb}{1,0,0}
\definecolor{webgreen}{rgb}{0,.5,0}
\definecolor{webbrown}{rgb}{.6,0,0}
\definecolor{CTsemi}{gray}{0.55}


\usepackage{microtype}
\usepackage{textcase}


\DeclareRobustCommand{\spacedallcaps}[1]{\textls[160]{\scshape\MakeTextUppercase{#1}}}
\DeclareRobustCommand{\spacedlowsmallcaps}[1]{\textls[80]{\scshape\MakeTextLowercase{#1}}}

\usepackage[automark]{scrlayer-scrpage}
\let\MakeMarkcase\spacedlowsmallcaps

\lehead{\mbox{\llap{\small\pagemark\kern2em}\headmark\hfil}}
\rohead{\mbox{\hfil{\headmark}\rlap{\small\kern2em\pagemark}}}
\ofoot[\small\pagemark]{}
\renewcommand{\headfont}{\small}
\DeclareFixedFont{\chapterNumber}{U}{eur}{b}{n}{70}

% Überschriften
% TODO: Remove titlesec dependency
	\usepackage[newparttoc]{titlesec}
	% Chapters
	\renewcommand{\chaptermark}[1]{\markboth{\spacedlowsmallcaps{#1}}{\spacedlowsmallcaps{#1}}}
	\titleformat{\chapter}[display]%
	{\relax}{\mbox{}\marginpar{\vspace*{-3\baselineskip}\color{CTsemi}\chapterNumber\thechapter}}{0pt}%
	{\raggedright\spacedallcaps}[\normalsize\vspace*{.8\baselineskip}\titlerule]%
	
	% Sections
	\renewcommand{\sectionmark}[1]{\markright{\textsc{\thesection}\enspace\spacedlowsmallcaps{#1}}}
	\titleformat{\section}
	{\relax}{\textsc{\MakeTextLowercase{\thesection}}}{1em}{\spacedlowsmallcaps}
	% Subsections
	\titleformat{\subsection}
		{\relax}{\textsc{\MakeTextLowercase{\thesubsection}}}{1em}{\normalsize\itshape}
	% Subsubsections
	\titleformat{\subsubsection}
		{\relax}{\textsc{\MakeTextLowercase{\thesubsubsection}}}{1em}{\normalsize\itshape}
	% Paragraphs
	\titleformat{\paragraph}[runin]
		{\normalfont\normalsize}{\theparagraph}{0pt}{\spacedlowsmallcaps}
	% Description Labels
		\renewcommand{\descriptionlabel}[1]{\hspace*{\labelsep}\spacedlowsmallcaps{#1}}   % spacedlowsmallcaps textit textsc
	% Abstände
	\titlespacing*{\chapter}{0pt}{1\baselineskip}{1.2\baselineskip}
	\titlespacing*{\section}{0pt}{1.25\baselineskip}{1\baselineskip}
	\titlespacing*{\subsection}{0pt}{1.25\baselineskip}{1\baselineskip}
	\titlespacing*{\paragraph}{0pt}{1\baselineskip}{1\baselineskip}


% ToC
	\usepackage[titles]{tocloft}

	% Seitenzahlen direkt nach Titel
	\renewcommand{\cftpartleader}{\hspace{1.5em}}%
	\renewcommand{\cftpartafterpnum}{\cftparfillskip}%
	\renewcommand{\cftchapleader}{\hspace{1.5em}}%
	\renewcommand{\cftchapafterpnum}{\cftparfillskip}%
	\renewcommand{\cftsubsecleader}{\hspace{1.5em}}%
	\renewcommand{\cftsubsecafterpnum}{\cftparfillskip}%

	% Chapter Formatierung
	\renewcommand{\cftchappresnum}{\spacedlowsmallcaps}%
	\renewcommand{\cftchapaftersnumb}{\spacedlowsmallcaps}%
	\renewcommand{\cftchapfont}{\spacedlowsmallcaps}%
	\renewcommand{\cftchappagefont}{\normalfont}%

	% Section Formatierung
	\renewcommand{\cftsecpresnum}{\scshape\MakeTextLowercase}%
	\renewcommand{\cftsecfont}{\normalfont}%
	\renewcommand{\cftsecpagefont}{\normalfont}%

	\renewcommand{\cftsecleader}{\hspace{1.5em}}%
	\renewcommand{\cftsecafterpnum}{\cftparfillskip}%
	
	% Subsection Formatierung
	\renewcommand{\cftsubsecpresnum}{\scshape\MakeTextLowercase}%
	\renewcommand{\cftsubsecfont}{\normalfont}%


% Seitendimensionen
\KOMAoptions{DIV=11, BCOR=10mm}
\setlength{\marginparwidth}{7em}%
\setlength{\marginparsep}{2em}%


% Hyperrefs und URLs
\usepackage{hyperref}
\usepackage{url}

% Misc Utility
\usepackage[cmex10]{amsmath}
\usepackage{amssymb}
\usepackage{mdwmath}
\usepackage{mdwtab}
\usepackage{eqparbox}
\usepackage{natbib}
\usepackage{xspace}

% Schriftart
\usepackage{newpxtext,newpxmath}
\useosf
\usepackage[euler-digits]{eulervm}

% Grafiken/Plots
\usepackage{flafter}
\usepackage{caption}
\usepackage{subcaption}
\usepackage{tikz}
\usepackage{wrapfig}
\usepackage{pgfplots}
\pgfplotsset{compat=1.15}
\usepgfplotslibrary{groupplots}

% Code Listings
\usepackage{listings}
\usepackage{algorithm}
\usepackage{algorithmic}

% Korrekte Darstellung der Umlaute
\usepackage{ae,aecompl}

% Anführungszeichen
\usepackage[babel,german=quotes]{csquotes}

% Classic thesis:
%\usepackage{classicthesis-ldpkg} 
% Options for classicthesis.sty:
%\usepackage[eulerchapternumbers,beramono,eulermath,parts]{classicthesis}

% Setup und Finetuning
\newlength{\abcd} % Für ab..z Längenberechnung
\newcommand{\myfloatalign}{\centering} % Float alignment
\setlength{\extrarowheight}{3pt} % Höhere Tabellenzeilen

% Equation-Nummerierung nach <chapter>.<section>.<index>
\numberwithin{equation}{section} 
% Table-Nummerierung nach <chapter>.<section>.<index>
\numberwithin{table}{section} 
% Figure-Nummerierung nach <chapter>.<section>.<index>
\numberwithin{figure}{section} 

% Captions dem Original-Template anpassen
\captionsetup{format=hang,font=small}

% SI Units
\usepackage{siunitx}
\sisetup{
	locale = DE,
	per-mode = fraction,
	binary-units = true 
}
\DeclareSIUnit\pixel{px}

% Tabellen
\usepackage{array}
\usepackage{booktabs}
\usepackage{tabularx}
\newcolumntype{L}[1]{>{\raggedright\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}
\newcolumntype{C}[1]{>{\centering\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}
\newcolumntype{R}[1]{>{\raggedleft\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}


% Einbinden der Eidesstattlichen Versicherung
\usepackage[final]{pdfpages}

% Problematische Dateiendungen beim importieren
\usepackage{grffile}

% Autoref Algorithmus
\makeatletter
\renewcommand{\ALG@name}{Algorithmus}
\renewcommand{\listalgorithmname}{\ALG@name-Verzeichnis}
\makeatother

% Absatz Optimierungen
\clubpenalty = 10000
\widowpenalty = 10000


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Ab hier können Änderungen erfolgen
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Eigene Pakete


% Anpassen von Plots
\pgfplotsset{ticklabel style={
		/pgf/number format/fixed,
		/pgf/number format/precision=4
	},scaled ticks=false}


% Anpassen von Code Listings
\lstset{
	frameround=fttt,
	language=python, % Standard Sprache, kann pro listing überschrieben werden, siehe https://en.wikibooks.org/wiki/LaTeX/Source_Code_Listings
	numbers=left,
	breaklines=true,
	keywordstyle=\color{blue}\bfseries, 
	basicstyle=\ttfamily\color{black},
	numberstyle=\color{black}
}


% Abkürzungen
\newcommand{\tu}{TU Dortmund\@\xspace}
\newcommand{\vgl}{vgl.\@\xspace} 
\newcommand{\Vgl}{Vgl.\@\xspace}
\newcommand{\zB}{\mbox{z.\,B.}\xspace}
\newcommand{\bspw}{bspw.\@\xspace}
\newcommand{\idR}{\mbox{i.\,d.\,R.}\xspace}
\newcommand{\bzw}{bzw.\@\xspace}
\newcommand{\dahe}{\mbox{d.\,h.}\xspace}
\newcommand{\etc}{etc.\@\xspace}
\newcommand{\evtl}{evtl.\@\xspace}
\newcommand{\ggf}{ggf.\@\xspace}
\newcommand{\bzgl}{bzgl.\@\xspace}
\newcommand{\gdw}{gdw.\@\xspace}
\newcommand{\soben}{s.\nolinebreak[4]\hspace{0.125em}\nolinebreak[4]o.\@\xspace}
\newcommand{\sunten}{s.\nolinebreak[4]\hspace{0.125em}\nolinebreak[4]u.\@\xspace}
\newcommand{\iA}{i.\nolinebreak[4]\hspace{0.125em}\nolinebreak[4]A.\@\xspace}
\newcommand{\sa}{s.\nolinebreak[4]\hspace{0.125em}\nolinebreak[4]a.\@\xspace}
\newcommand{\ua}{u.\nolinebreak[4]\hspace{0.125em}\nolinebreak[4]a.\@\xspace}
\newcommand{\oa}{o.\nolinebreak[4]\hspace{0.125em}\nolinebreak[4]Ä.\@\xspace}
\newcommand{\og}{o.\nolinebreak[4]\hspace{0.125em}\nolinebreak[4]g.\@\xspace}
\newcommand{\oBdA}{o.\nolinebreak[4]\hspace{0.125em}\nolinebreak[4]B.\nolinebreak[4]\hspace{0.125em}d.\nolinebreak[4]\hspace{0.125em}A.\@\xspace}
\newcommand{\OBdA}{O.\nolinebreak[4]\hspace{0.125em}\nolinebreak[4]B.\nolinebreak[4]\hspace{0.125em}d.\nolinebreak[4]\hspace{0.125em}A.\@\xspace}
\newcommand{\etal}{\mbox{\textit{et.\,al.}}\xspace}


% Hyperrefs
\hypersetup{%
    colorlinks=true, linktocpage=true, pdfstartpage=3, pdfstartview=FitV,%
    breaklinks=true, pdfpagemode=UseNone, pageanchor=true, pdfpagemode=UseOutlines,%
    plainpages=false, bookmarksnumbered, bookmarksopen=true, bookmarksopenlevel=1,%
    hypertexnames=true, pdfhighlight=/O,%hyperfootnotes=true,%nesting=true,%frenchlinks,%
    urlcolor=RoyalBlue, linkcolor=RoyalBlue, citecolor=webgreen, %pagecolor=RoyalBlue,%
    % uncomment the following line if you want to have black links (e.g., for printing)
    %urlcolor=Black, linkcolor=Black, citecolor=Black, %pagecolor=Black,%
    pdftitle={\Titel},%
    pdfauthor={\textcopyright\ \Autor, \tu, \Faculty},%
    pdfsubject={},%
    pdfkeywords={},%
    pdfcreator={pdfLaTeX},%
    pdfproducer={LaTeX with hyperref}%
}
